const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DAZ-9ri2.js","./VegaLite-DvQDATwI.js","./index-CelXfcd8.js","./index-CGDMlQfO.css","./compile-DVQe1Mzk.js","./time-DKdOTnQg.js","./timer-Bqd5yn_a.js","./linear-uO6UVhXt.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./step-BwsUM5iJ.js","./arc-Cuwikxov.js","./index-BEQfoZiP.js","./index-Db36XTG_.js"])))=>i.map(i=>d[i]);
import{c as J,a as T,K as O,av as Q,u as W,r as k,j as s,d as X,a9 as Z,ay as tt,U,ak as et,T as rt,V as st,aB as A,aG as it,aH as ot,c7 as at,c8 as lt,__tla as nt}from"./index-CelXfcd8.js";import{c as mt}from"./compile-DVQe1Mzk.js";import{r as ct,b as pt,__tla as dt}from"./storage-Dr0CC44z.js";import{C as ut}from"./clear-button-C4fDVSv8.js";import{f as G,E as ht,C as xt,__tla as ft}from"./edit-page-C5TsEeSo.js";import{P as gt}from"./empty-state-DW308mFO.js";import{A as vt}from"./links-Drv7cJgN.js";import{C as jt}from"./circle-play-CK3UZRYQ.js";import"./time-DKdOTnQg.js";import"./timer-Bqd5yn_a.js";import"./linear-uO6UVhXt.js";import"./init-DLRA0X12.js";import"./range-CtcPcB_L.js";import"./zoom-COrs4lFh.js";import"./ordinal-DDUp3AbE.js";import"./colors-bszWmPJw.js";import"./step-BwsUM5iJ.js";import"./arc-Cuwikxov.js";import"./index-BEQfoZiP.js";import"./index-BYVZlBF8.js";import"./index-_luCZMLM.js";import"./index-mkubqy9-.js";import"./index-BelfnXwL.js";import"./index-BneyUujp.js";import"./index-Csd6QrCV.js";import"./index-C02SqeRj.js";import"./index-M_pBKDSe.js";import"./index-C7dtgr9A.js";import"./index-CtPksxf0.js";import"./index-DONRrmA2.js";import"./index-z4krxQ4j.js";import"./index-CAQvMTzM.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asn1-DWPaVWf6.js";import"./brainfuck-CtZaYBKt.js";import"./cobol-stawOqaz.js";import"./clike-BgBwzOhw.js";import"./clojure-DiuoqK-z.js";import"./css-ZjFoif2m.js";import"./cmake-DXn5xaP-.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./cypher-gJDei3ni.js";import"./python-DD-Q2bae.js";import"./crystal-CRzZ78HM.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dtd-DI9Herc-.js";import"./dylan-DkEP81N9.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-DompmV0j.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./simple-mode-C3vEBAcb.js";import"./forth-POgR1ypr.js";import"./fortran-DL7KluxX.js";import"./mllike-3c2dg9RT.js";import"./gas-bV0CklSb.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CLQs6EAM.js";import"./haxe-D25e-2l-.js";import"./idl-pcmmZuaN.js";import"./javascript-BpzJj0-u.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mirc-DkvFAiy5.js";import"./mathematica-IIbmv7SK.js";import"./modelica-DSrSSXCg.js";import"./mumps-zvxmGV4l.js";import"./mbox-z_N2Mo3d.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-BSwWqoLa.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./pug-BTvK5tSS.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./rpm-DI_rRufH.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./sparql-BRLJFz69.js";import"./stylus-Bdo_Aemu.js";import"./swift-B_XXVlXX.js";import"./verilog-B4LBqg_1.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./toml-wcPdHu67.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./ttcn-cfg-CKJxb-l2.js";import"./turtle-BkSuIpt-.js";import"./webidl-CGwyPRYs.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./vhdl-CWWH2SUo.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./mscgen-B2igx18G.js";import"./index-sbO9UaUU.js";import"./trash-C6Ko-g5q.js";import"./_createAggregator-ZcHkHPNJ.js";import"./_baseEach--KDTwKbG.js";import{__tla as yt}from"./loro_wasm_bg-C1ks32Vm.js";let K,w,It=Promise.all([(()=>{try{return nt}catch{}})(),(()=>{try{return dt}catch{}})(),(()=>{try{return ft}catch{}})(),(()=>{try{return yt}catch{}})()]).then(async()=>{const Y=J("circle-ellipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),M="hoveredCellId",C="cellHover",P="cell",R="startTimestamp",L="endTimestamp",z="status";let E,B,$,H,V,q,D,F;E=Q(new Map),K=()=>{const e=T.c(28),{runIds:t,runMap:r}=O(ct),l=O(E),{clearRuns:o}=pt(),{theme:a}=W(),[i,u]=k.useState("above");let m;e[0]!==i?(m=()=>{u(i==="above"?"sideBySide":"above")},e[0]=i,e[1]=m):m=e[1];const x=m;if(t.length===0){let h;return e[2]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(gt,{title:"No traces",description:s.jsx("span",{children:"Cells that have ran will appear here."}),icon:s.jsx(vt,{})}),e[2]=h):h=e[2],h}let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),e[3]=d):d=e[3];const c=i==="sideBySide";let f,p,y,g,v,I;if(e[4]!==c||e[5]!==x?(f=s.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d,s.jsx("input",{type:"checkbox",name:"chartPosition","data-testid":"chartPosition",onClick:x,defaultChecked:c,className:"h-3 cursor-pointer"})]}),e[4]=c,e[5]=x,e[6]=f):f=e[6],e[7]!==o?(p=s.jsx(ut,{dataTestId:"clear-traces-button",onClick:o}),e[7]=o,e[8]=p):p=e[8],e[9]!==f||e[10]!==p?(y=s.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[f,p]}),e[9]=f,e[10]=p,e[11]=y):y=e[11],e[12]!==i||e[13]!==l||e[14]!==t||e[15]!==r||e[16]!==a){let h;e[18]!==i||e[19]!==l||e[20]!==r||e[21]!==a?(h=(_,n)=>{const j=r.get(_);if(j)return s.jsx(H,{run:j,isExpanded:l.get(j.runId),isMostRecentRun:n===0,chartPosition:i,theme:a},j.runId)},e[18]=i,e[19]=l,e[20]=r,e[21]=a,e[22]=h):h=e[22],g=t.map(h),e[12]=i,e[13]=l,e[14]=t,e[15]=r,e[16]=a,e[17]=g}else g=e[17];return e[23]!==g?(v=s.jsx("div",{className:"flex flex-col gap-3",children:g}),e[23]=g,e[24]=v):v=e[24],e[25]!==y||e[26]!==v?(I=s.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[y,v]}),e[25]=y,e[26]=v,e[27]=I):I=e[27],I},B=X.lazy(()=>Z(()=>import("./index-DAZ-9ri2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url).then(e=>({default:e.Vega}))),$=e=>{const t=T.c(10),{ref:r,width:l}=lt(),o=l===void 0?300:l,a=e.theme==="dark"?"dark":void 0,i=o-50;let u,m;return t[0]!==e.height||t[1]!==e.signalListeners||t[2]!==e.vegaSpec||t[3]!==a||t[4]!==i?(u=s.jsx(k.Suspense,{children:s.jsx(B,{spec:e.vegaSpec,theme:a,width:i,height:e.height,signalListeners:e.signalListeners,actions:!1})}),t[0]=e.height,t[1]=e.signalListeners,t[2]=e.vegaSpec,t[3]=a,t[4]=i,t[5]=u):u=t[5],t[6]!==e.className||t[7]!==r||t[8]!==u?(m=s.jsx("div",{className:e.className,ref:r,children:u}),t[6]=e.className,t[7]=r,t[8]=u,t[9]=m):m=t[9],m},H=({run:e,isMostRecentRun:t,chartPosition:r,isExpanded:l,theme:o})=>{const a=tt(E),i=(l=l??t)?it:ot,u=s.jsx(i,{height:16,className:"inline"}),m=s.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{a(x=>{const d=new Map(x);return d.set(e.runId,!l),d})},children:["Run - ",U(e.runStartTime),u]});return l?s.jsx(V,{run:e,chartPosition:r,theme:o,title:m},e.runId):s.jsx("div",{className:"flex flex-col",children:s.jsx("pre",{className:"font-mono font-semibold",children:m})},e.runId)},V=e=>{const t=T.c(32),{run:r,chartPosition:l,theme:o,title:a}=e,[i,u]=k.useState();let m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m={[C]:(_,n)=>{var N;const j=n,S=(N=j.cell)==null?void 0:N[0];u(S??null)}},t[0]=m):m=t[0];const x=m,d=et();let c,f;if(t[1]!==d||t[2]!==l||t[3]!==r.cellRuns||t[4]!==r.runId||t[5]!==o){const _=[...r.cellRuns.values()].map(n=>{const j=n.elapsedTime??0;return{cell:n.cellId,cellNum:d.inOrderIds.indexOf(n.cellId),startTimestamp:w(n.startTime),endTimestamp:w(n.startTime+j),elapsedTime:G(1e3*j),status:n.status}});c=`hiddenInputElement-${r.runId}`,f=mt((function(n,j,S,N){const b="hoursminutessecondsmilliseconds";return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:N==="dark"?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:M,bind:{element:`#${j}`}},{name:C,select:{type:"point",on:"mouseover",fields:[P],clear:"mouseout"}}],height:{step:S==="sideBySide"?26:21},encoding:{y:{field:"cellNum",scale:{paddingInner:.2},sort:{field:"sortPriority"},title:"cell",axis:S==="sideBySide"?null:void 0},x:{field:R,type:"temporal",axis:{orient:"top",title:null}},x2:{field:L,type:"temporal"},tooltip:[{field:R,type:"temporal",timeUnit:b,title:"Start"},{field:L,type:"temporal",timeUnit:b,title:"End"}],size:{value:{expr:`${M} == toString(datum.${P}) ? 19.5 : 18`}},color:{field:z,scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:n},transform:[{calculate:`datum.${z} === 'queued' ? 9999999999999 : datum.${R}`,as:"sortPriority"}],config:{view:{stroke:"transparent"}}}})(_,c,l,o)),t[1]=d,t[2]=l,t[3]=r.cellRuns,t[4]=r.runId,t[5]=o,t[6]=c,t[7]=f}else c=t[6],f=t[7];const p=f.spec;let y;t[8]!==c||t[9]!==i||t[10]!==r?(y=s.jsx(q,{run:r,hoveredCellId:i,hiddenInputElementId:c}),t[8]=c,t[9]=i,t[10]=r,t[11]=y):y=t[11];const g=y;if(l==="above"){let _,n,j;return t[12]!==o||t[13]!==p?(_=s.jsx($,{vegaSpec:p,height:120,signalListeners:x,theme:o}),t[12]=o,t[13]=p,t[14]=_):_=t[14],t[15]!==_||t[16]!==a||t[17]!==g?(n=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,_,g]}),t[15]=_,t[16]=a,t[17]=g,t[18]=n):n=t[18],t[19]!==r.runId||t[20]!==n?(j=s.jsx("div",{className:"flex flex-col",children:n},r.runId),t[19]=r.runId,t[20]=n,t[21]=j):j=t[21],j}let v,I,h;return t[22]!==a||t[23]!==g?(v=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,g]}),t[22]=a,t[23]=g,t[24]=v):v=t[24],t[25]!==o||t[26]!==p?(I=s.jsx($,{className:"-mt-0.5 flex-1",vegaSpec:p,height:100,signalListeners:x,theme:o}),t[25]=o,t[26]=p,t[27]=I):I=t[27],t[28]!==r.runId||t[29]!==v||t[30]!==I?(h=s.jsxs("div",{className:"flex flex-row",children:[v,I]},r.runId),t[28]=r.runId,t[29]=v,t[30]=I,t[31]=h):h=t[31],h},q=e=>{const t=T.c(12),{run:r,hoveredCellId:l,hiddenInputElementId:o}=e,a=k.useRef(null);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=p=>{a.current&&(a.current.value=String(p),a.current.dispatchEvent(new Event("input",{bubbles:!0})))},t[0]=i):i=t[0];const u=i,m=l||"";let x,d,c,f;return t[1]!==o||t[2]!==m?(x=s.jsx("input",{type:"text",id:o,defaultValue:m,hidden:!0,ref:a}),t[1]=o,t[2]=m,t[3]=x):x=t[3],t[4]!==r.cellRuns?(d=[...r.cellRuns.values()],t[4]=r.cellRuns,t[5]=d):d=t[5],t[6]!==l||t[7]!==d?(c=d.map(p=>s.jsx(F,{cellRun:p,hovered:p.cellId===l,dispatchHoverEvent:u},p.cellId)),t[6]=l,t[7]=d,t[8]=c):c=t[8],t[9]!==x||t[10]!==c?(f=s.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[x,c]}),t[9]=x,t[10]=c,t[11]=f):f=t[11],f},D={success:s.jsx(xt,{color:"green",size:14}),running:s.jsx(jt,{color:"var(--blue-10)",size:14}),error:s.jsx(at,{color:"red",size:14}),queued:s.jsx(Y,{color:"grey",size:14})},F=e=>{const t=T.c(39),{cellRun:r,hovered:l,dispatchHoverEvent:o}=e;let a;t[0]!==r.elapsedTime?(a=r.elapsedTime?G(1e3*r.elapsedTime):"-",t[0]=r.elapsedTime,t[1]=a):a=t[1];const i=a;let u;t[2]!==r.elapsedTime||t[3]!==i?(u=r.elapsedTime?s.jsxs("span",{children:["This cell took ",s.jsx(ht,{elapsedTime:i})," to run"]}):s.jsx("span",{children:"This cell has not been run"}),t[2]=r.elapsedTime,t[3]=i,t[4]=u):u=t[4];const m=u;let x;t[5]!==r.cellId||t[6]!==o?(x=()=>{o(r.cellId)},t[5]=r.cellId,t[6]=o,t[7]=x):x=t[7];const d=x;let c;t[8]!==o?(c=()=>{o(null)},t[8]=o,t[9]=c):c=t[9];const f=c,p=l&&"bg-(--gray-3) opacity-100";let y,g,v,I,h,_,n;t[10]!==p?(y=rt("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-(--gray-3) hover:opacity-100",p),t[10]=p,t[11]=y):y=t[11],t[12]!==r.startTime?(g=U(r.startTime),t[12]=r.startTime,t[13]=g):g=t[13],t[14]!==g?(v=s.jsxs("span",{className:"text-(--gray-10) dark:text-(--gray-11)",children:["[",g,"]"]}),t[14]=g,t[15]=v):v=t[15],t[16]!==r.cellId?(I=s.jsxs("span",{className:"text-(--gray-10) w-16",children:["(",s.jsx(st,{cellId:r.cellId}),")"]}),t[16]=r.cellId,t[17]=I):I=t[17],t[18]!==r.code?(h=s.jsx("span",{className:"w-40 truncate -ml-1",children:r.code}),t[18]=r.code,t[19]=h):h=t[19],t[20]!==i?(_=s.jsx("span",{className:"text-(--gray-10) dark:text-(--gray-11)",children:i}),t[20]=i,t[21]=_):_=t[21],t[22]!==m||t[23]!==_?(n=s.jsx(A,{content:m,children:_}),t[22]=m,t[23]=_,t[24]=n):n=t[24];const j=D[r.status];let S,N,b;return t[25]!==r.status||t[26]!==j?(S=s.jsx(A,{content:r.status,children:j}),t[25]=r.status,t[26]=j,t[27]=S):S=t[27],t[28]!==n||t[29]!==S?(N=s.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[n,S]}),t[28]=n,t[29]=S,t[30]=N):N=t[30],t[31]!==d||t[32]!==f||t[33]!==h||t[34]!==N||t[35]!==y||t[36]!==v||t[37]!==I?(b=s.jsxs("div",{className:y,onMouseEnter:d,onMouseLeave:f,children:[v,I,h,N]}),t[31]=d,t[32]=f,t[33]=h,t[34]=N,t[35]=y,t[36]=v,t[37]=I,t[38]=b):b=t[38],b},w=function(e){try{const t=new Date(1e3*e),r=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),u=String(t.getSeconds()).padStart(2,"0");return`${r}-${l}-${o} ${a}:${i}:${u}.${String(t.getMilliseconds()).padStart(3,"0")}`}catch{return""}}});export{K as Tracing,It as __tla,w as formatChartTime};
