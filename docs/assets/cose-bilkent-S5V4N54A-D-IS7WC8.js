import{_ as X,l as H}from"./mermaid.core-CvvJtCRj.js";import{c as V}from"./cytoscape.esm-UcEO6FGL.js";import{ai as ht}from"./index-CelXfcd8.js";import{s as lt}from"./transform-D9VCJYws.js";import"./step-BwsUM5iJ.js";import"./isEmpty-CqX_YTIf.js";import"./timer-Bqd5yn_a.js";var j,q={exports:{}},z={exports:{}},Z={exports:{}};function gt(){return j?Z.exports:(j=1,R=function(){return(function(m){var _={};function u(e){if(_[e])return _[e].exports;var t=_[e]={i:e,l:!1,exports:{}};return m[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}return u.m=m,u.c=_,u.i=function(e){return e},u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=26)})([function(m,_,u){function e(){}e.QUALITY=1,e.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,e.DEFAULT_INCREMENTAL=!1,e.DEFAULT_ANIMATION_ON_LAYOUT=!0,e.DEFAULT_ANIMATION_DURING_LAYOUT=!1,e.DEFAULT_ANIMATION_PERIOD=50,e.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,e.DEFAULT_GRAPH_MARGIN=15,e.NODE_DIMENSIONS_INCLUDE_LABELS=!1,e.SIMPLE_NODE_SIZE=40,e.SIMPLE_NODE_HALF_SIZE=e.SIMPLE_NODE_SIZE/2,e.EMPTY_COMPOUND_NODE_SIZE=40,e.MIN_EDGE_LENGTH=1,e.WORLD_BOUNDARY=1e6,e.INITIAL_WORLD_BOUNDARY=e.WORLD_BOUNDARY/1e3,e.WORLD_CENTER_X=1200,e.WORLD_CENTER_Y=900,m.exports=e},function(m,_,u){var e=u(2),t=u(8),o=u(9);function r(i,h,a){e.call(this,a),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=a,this.bendpoints=[],this.source=i,this.target=h}for(var n in r.prototype=Object.create(e.prototype),e)r[n]=e[n];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(i){if(this.source===i)return this.target;if(this.target===i)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(i,h){for(var a=this.getOtherEnd(i),g=h.getGraphManager().getRoot();;){if(a.getOwner()==h)return a;if(a.getOwner()==g)break;a=a.getOwner().getParent()}return null},r.prototype.updateLength=function(){var i=new Array(4);this.isOverlapingSourceAndTarget=t.getIntersection(this.target.getRect(),this.source.getRect(),i),this.isOverlapingSourceAndTarget||(this.lengthX=i[0]-i[2],this.lengthY=i[1]-i[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},m.exports=r},function(m,_,u){m.exports=function(e){this.vGraphObject=e}},function(m,_,u){var e=u(2),t=u(10),o=u(13),r=u(0),n=u(16),i=u(4);function h(g,p,l,f){l==null&&f==null&&(f=p),e.call(this,f),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=t.MIN_VALUE,this.inclusionTreeDepth=t.MAX_VALUE,this.vGraphObject=f,this.edges=[],this.graphManager=g,this.rect=l!=null&&p!=null?new o(p.x,p.y,l.width,l.height):new o}for(var a in h.prototype=Object.create(e.prototype),e)h[a]=e[a];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(g){this.rect.width=g},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(g){this.rect.height=g},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new i(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new i(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(g,p){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(g,p){this.rect.x=g-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(g,p){this.rect.x=g,this.rect.y=p},h.prototype.moveBy=function(g,p){this.rect.x+=g,this.rect.y+=p},h.prototype.getEdgeListToNode=function(g){var p=[],l=this;return l.edges.forEach(function(f){if(f.target==g){if(f.source!=l)throw"Incorrect edge source!";p.push(f)}}),p},h.prototype.getEdgesBetween=function(g){var p=[],l=this;return l.edges.forEach(function(f){if(f.source!=l&&f.target!=l)throw"Incorrect edge source and/or target";f.target!=g&&f.source!=g||p.push(f)}),p},h.prototype.getNeighborsList=function(){var g=new Set,p=this;return p.edges.forEach(function(l){if(l.source==p)g.add(l.target);else{if(l.target!=p)throw"Incorrect incidency!";g.add(l.source)}}),g},h.prototype.withChildren=function(){var g=new Set;if(g.add(this),this.child!=null)for(var p=this.child.getNodes(),l=0;l<p.length;l++)p[l].withChildren().forEach(function(f){g.add(f)});return g},h.prototype.getNoOfChildren=function(){var g=0;if(this.child==null)g=1;else for(var p=this.child.getNodes(),l=0;l<p.length;l++)g+=p[l].getNoOfChildren();return g==0&&(g=1),g},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==t.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var g,p,l=-r.INITIAL_WORLD_BOUNDARY,f=r.INITIAL_WORLD_BOUNDARY;g=r.WORLD_CENTER_X+n.nextDouble()*(f-l)+l;var A=-r.INITIAL_WORLD_BOUNDARY,T=r.INITIAL_WORLD_BOUNDARY;p=r.WORLD_CENTER_Y+n.nextDouble()*(T-A)+A,this.rect.x=g,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),r.NODE_DIMENSIONS_INCLUDE_LABELS){var p=g.getRight()-g.getLeft(),l=g.getBottom()-g.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>l&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-l)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-l),this.setHeight(this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==t.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(g){var p=this.rect.x;p>r.WORLD_BOUNDARY?p=r.WORLD_BOUNDARY:p<-r.WORLD_BOUNDARY&&(p=-r.WORLD_BOUNDARY);var l=this.rect.y;l>r.WORLD_BOUNDARY?l=r.WORLD_BOUNDARY:l<-r.WORLD_BOUNDARY&&(l=-r.WORLD_BOUNDARY);var f=new i(p,l),A=g.inverseTransformPoint(f);this.setLocation(A.x,A.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},m.exports=h},function(m,_,u){function e(t,o){t==null&&o==null?(this.x=0,this.y=0):(this.x=t,this.y=o)}e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.setX=function(t){this.x=t},e.prototype.setY=function(t){this.y=t},e.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},e.prototype.getCopy=function(){return new e(this.x,this.y)},e.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},m.exports=e},function(m,_,u){var e=u(2),t=u(10),o=u(0),r=u(6),n=u(3),i=u(1),h=u(13),a=u(12),g=u(11);function p(f,A,T){e.call(this,T),this.estimatedSize=t.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=f,A!=null&&A instanceof r?this.graphManager=A:A!=null&&A instanceof Layout&&(this.graphManager=A.graphManager)}for(var l in p.prototype=Object.create(e.prototype),e)p[l]=e[l];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(f,A,T){if(A==null&&T==null){var v=f;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}var y=f;if(!(this.getNodes().indexOf(A)>-1&&this.getNodes().indexOf(T)>-1))throw"Source or target not in graph!";if(A.owner!=T.owner||A.owner!=this)throw"Both owners must be this graph!";return A.owner!=T.owner?null:(y.source=A,y.target=T,y.isInterGraph=!1,this.getEdges().push(y),A.edges.push(y),T!=A&&T.edges.push(y),y)},p.prototype.remove=function(f){var A=f;if(f instanceof n){if(A==null)throw"Node is null!";if(A.owner==null||A.owner!=this)throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var T=A.edges.slice(),v=T.length,y=0;y<v;y++)(N=T[y]).isInterGraph?this.graphManager.remove(N):N.source.owner.remove(N);if((s=this.nodes.indexOf(A))==-1)throw"Node not in owner node list!";this.nodes.splice(s,1)}else if(f instanceof i){var N;if((N=f)==null)throw"Edge is null!";if(N.source==null||N.target==null)throw"Source and/or target is null!";if(N.source.owner==null||N.target.owner==null||N.source.owner!=this||N.target.owner!=this)throw"Source and/or target owner is invalid!";var s,d=N.source.edges.indexOf(N),c=N.target.edges.indexOf(N);if(!(d>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(N.source.edges.splice(d,1),N.target!=N.source&&N.target.edges.splice(c,1),(s=N.source.owner.getEdges().indexOf(N))==-1)throw"Not in owner's edge list!";N.source.owner.getEdges().splice(s,1)}},p.prototype.updateLeftTop=function(){for(var f,A,T,v=t.MAX_VALUE,y=t.MAX_VALUE,N=this.getNodes(),s=N.length,d=0;d<s;d++){var c=N[d];v>(f=c.getTop())&&(v=f),y>(A=c.getLeft())&&(y=A)}return v==t.MAX_VALUE?null:(T=N[0].getParent().paddingLeft!=null?N[0].getParent().paddingLeft:this.margin,this.left=y-T,this.top=v-T,new a(this.left,this.top))},p.prototype.updateBounds=function(f){for(var A,T,v,y,N,s=t.MAX_VALUE,d=-t.MAX_VALUE,c=t.MAX_VALUE,E=-t.MAX_VALUE,L=this.nodes,O=L.length,I=0;I<O;I++){var w=L[I];f&&w.child!=null&&w.updateBounds(),s>(A=w.getLeft())&&(s=A),d<(T=w.getRight())&&(d=T),c>(v=w.getTop())&&(c=v),E<(y=w.getBottom())&&(E=y)}var D=new h(s,c,d-s,E-c);s==t.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),N=L[0].getParent().paddingLeft!=null?L[0].getParent().paddingLeft:this.margin,this.left=D.x-N,this.right=D.x+D.width+N,this.top=D.y-N,this.bottom=D.y+D.height+N},p.calculateBounds=function(f){for(var A,T,v,y,N=t.MAX_VALUE,s=-t.MAX_VALUE,d=t.MAX_VALUE,c=-t.MAX_VALUE,E=f.length,L=0;L<E;L++){var O=f[L];N>(A=O.getLeft())&&(N=A),s<(T=O.getRight())&&(s=T),d>(v=O.getTop())&&(d=v),c<(y=O.getBottom())&&(c=y)}return new h(N,d,s-N,c-d)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==t.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var f=0,A=this.nodes,T=A.length,v=0;v<T;v++)f+=A[v].calcEstimatedSize();return this.estimatedSize=f==0?o.EMPTY_COMPOUND_NODE_SIZE:f/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var f=this;if(this.nodes.length!=0){var A,T,v=new g,y=new Set,N=this.nodes[0];for(N.withChildren().forEach(function(E){v.push(E),y.add(E)});v.length!==0;)for(var s=(A=(N=v.shift()).getEdges()).length,d=0;d<s;d++)(T=A[d].getOtherEndInGraph(N,this))==null||y.has(T)||T.withChildren().forEach(function(E){v.push(E),y.add(E)});if(this.isConnected=!1,y.size>=this.nodes.length){var c=0;y.forEach(function(E){E.owner==f&&c++}),c==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},m.exports=p},function(m,_,u){var e,t=u(1);function o(r){e=u(5),this.layout=r,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var r=this.layout.newGraph(),n=this.layout.newNode(null),i=this.add(r,n);return this.setRootGraph(i),this.rootGraph},o.prototype.add=function(r,n,i,h,a){if(i==null&&h==null&&a==null){if(r==null)throw"Graph is null!";if(n==null)throw"Parent node is null!";if(this.graphs.indexOf(r)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(r),r.parent!=null)throw"Already has a parent!";if(n.child!=null)throw"Already has a child!";return r.parent=n,n.child=r,r}a=i,i=r;var g=(h=n).getOwner(),p=a.getOwner();if(g==null||g.getGraphManager()!=this)throw"Source not in this graph mgr!";if(p==null||p.getGraphManager()!=this)throw"Target not in this graph mgr!";if(g==p)return i.isInterGraph=!1,g.add(i,h,a);if(i.isInterGraph=!0,i.source=h,i.target=a,this.edges.indexOf(i)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(i),i.source==null||i.target==null)throw"Edge source and/or target is null!";if(i.source.edges.indexOf(i)!=-1||i.target.edges.indexOf(i)!=-1)throw"Edge already in source and/or target incidency list!";return i.source.edges.push(i),i.target.edges.push(i),i},o.prototype.remove=function(r){if(r instanceof e){var n=r;if(n.getGraphManager()!=this)throw"Graph not in this graph mgr";if(n!=this.rootGraph&&(n.parent==null||n.parent.graphManager!=this))throw"Invalid parent node!";for(var i,h=[],a=(h=h.concat(n.getEdges())).length,g=0;g<a;g++)i=h[g],n.remove(i);var p,l=[];for(a=(l=l.concat(n.getNodes())).length,g=0;g<a;g++)p=l[g],n.remove(p);n==this.rootGraph&&this.setRootGraph(null);var f=this.graphs.indexOf(n);this.graphs.splice(f,1),n.parent=null}else if(r instanceof t){if((i=r)==null)throw"Edge is null!";if(!i.isInterGraph)throw"Not an inter-graph edge!";if(i.source==null||i.target==null)throw"Source and/or target is null!";if(i.source.edges.indexOf(i)==-1||i.target.edges.indexOf(i)==-1)throw"Source and/or target doesn't know this edge!";if(f=i.source.edges.indexOf(i),i.source.edges.splice(f,1),f=i.target.edges.indexOf(i),i.target.edges.splice(f,1),i.source.owner==null||i.source.owner.getGraphManager()==null)throw"Edge owner graph or owner graph manager is null!";if(i.source.owner.getGraphManager().edges.indexOf(i)==-1)throw"Not in owner graph manager's edge list!";f=i.source.owner.getGraphManager().edges.indexOf(i),i.source.owner.getGraphManager().edges.splice(f,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var r=[],n=this.getGraphs(),i=n.length,h=0;h<i;h++)r=r.concat(n[h].getNodes());this.allNodes=r}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var r=[],n=this.getGraphs();n.length;for(var i=0;i<n.length;i++)r=r.concat(n[i].getEdges());r=r.concat(this.edges),this.allEdges=r}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(r){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=r},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(r){if(r.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=r,r.parent==null&&(r.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(r,n){if(r==null||n==null)throw"assert failed";if(r==n)return!0;for(var i,h=r.getOwner();(i=h.getParent())!=null;){if(i==n)return!0;if((h=i.getOwner())==null)break}for(h=n.getOwner();(i=h.getParent())!=null;){if(i==r)return!0;if((h=i.getOwner())==null)break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var r,n,i,h,a,g=this.getAllEdges(),p=g.length,l=0;l<p;l++)if(n=(r=g[l]).source,i=r.target,r.lca=null,r.sourceInLca=n,r.targetInLca=i,n!=i){for(h=n.getOwner();r.lca==null;){for(r.targetInLca=i,a=i.getOwner();r.lca==null;){if(a==h){r.lca=a;break}if(a==this.rootGraph)break;if(r.lca!=null)throw"assert failed";r.targetInLca=a.getParent(),a=r.targetInLca.getOwner()}if(h==this.rootGraph)break;r.lca==null&&(r.sourceInLca=h.getParent(),h=r.sourceInLca.getOwner())}if(r.lca==null)throw"assert failed"}else r.lca=n.getOwner()},o.prototype.calcLowestCommonAncestor=function(r,n){if(r==n)return r.getOwner();for(var i=r.getOwner();i!=null;){for(var h=n.getOwner();h!=null;){if(h==i)return h;h=h.getParent().getOwner()}i=i.getParent().getOwner()}return i},o.prototype.calcInclusionTreeDepths=function(r,n){var i;r==null&&n==null&&(r=this.rootGraph,n=1);for(var h=r.getNodes(),a=h.length,g=0;g<a;g++)(i=h[g]).inclusionTreeDepth=n,i.child!=null&&this.calcInclusionTreeDepths(i.child,n+1)},o.prototype.includesInvalidEdge=function(){for(var r,n=this.edges.length,i=0;i<n;i++)if(r=this.edges[i],this.isOneAncestorOfOther(r.source,r.target))return!0;return!1},m.exports=o},function(m,_,u){var e=u(0);function t(){}for(var o in e)t[o]=e[o];t.MAX_ITERATIONS=2500,t.DEFAULT_EDGE_LENGTH=50,t.DEFAULT_SPRING_STRENGTH=.45,t.DEFAULT_REPULSION_STRENGTH=4500,t.DEFAULT_GRAVITY_STRENGTH=.4,t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,t.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,t.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,t.COOLING_ADAPTATION_FACTOR=.33,t.ADAPTATION_LOWER_NODE_LIMIT=1e3,t.ADAPTATION_UPPER_NODE_LIMIT=5e3,t.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,t.MAX_NODE_DISPLACEMENT=3*t.MAX_NODE_DISPLACEMENT_INCREMENTAL,t.MIN_REPULSION_DIST=t.DEFAULT_EDGE_LENGTH/10,t.CONVERGENCE_CHECK_PERIOD=100,t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,t.MIN_EDGE_LENGTH=1,t.GRID_CALCULATION_CHECK_PERIOD=10,m.exports=t},function(m,_,u){var e=u(12);function t(){}t.calcSeparationAmount=function(o,r,n,i){if(!o.intersects(r))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(o,r,h),n[0]=Math.min(o.getRight(),r.getRight())-Math.max(o.x,r.x),n[1]=Math.min(o.getBottom(),r.getBottom())-Math.max(o.y,r.y),o.getX()<=r.getX()&&o.getRight()>=r.getRight()?n[0]+=Math.min(r.getX()-o.getX(),o.getRight()-r.getRight()):r.getX()<=o.getX()&&r.getRight()>=o.getRight()&&(n[0]+=Math.min(o.getX()-r.getX(),r.getRight()-o.getRight())),o.getY()<=r.getY()&&o.getBottom()>=r.getBottom()?n[1]+=Math.min(r.getY()-o.getY(),o.getBottom()-r.getBottom()):r.getY()<=o.getY()&&r.getBottom()>=o.getBottom()&&(n[1]+=Math.min(o.getY()-r.getY(),r.getBottom()-o.getBottom()));var a=Math.abs((r.getCenterY()-o.getCenterY())/(r.getCenterX()-o.getCenterX()));r.getCenterY()===o.getCenterY()&&r.getCenterX()===o.getCenterX()&&(a=1);var g=a*n[0],p=n[1]/a;n[0]<p?p=n[0]:g=n[1],n[0]=-1*h[0]*(p/2+i),n[1]=-1*h[1]*(g/2+i)},t.decideDirectionsForOverlappingNodes=function(o,r,n){o.getCenterX()<r.getCenterX()?n[0]=-1:n[0]=1,o.getCenterY()<r.getCenterY()?n[1]=-1:n[1]=1},t.getIntersection2=function(o,r,n){var i=o.getCenterX(),h=o.getCenterY(),a=r.getCenterX(),g=r.getCenterY();if(o.intersects(r))return n[0]=i,n[1]=h,n[2]=a,n[3]=g,!0;var p=o.getX(),l=o.getY(),f=o.getRight(),A=o.getX(),T=o.getBottom(),v=o.getRight(),y=o.getWidthHalf(),N=o.getHeightHalf(),s=r.getX(),d=r.getY(),c=r.getRight(),E=r.getX(),L=r.getBottom(),O=r.getRight(),I=r.getWidthHalf(),w=r.getHeightHalf(),D=!1,C=!1;if(i===a){if(h>g)return n[0]=i,n[1]=l,n[2]=a,n[3]=L,!1;if(h<g)return n[0]=i,n[1]=T,n[2]=a,n[3]=d,!1}else if(h===g){if(i>a)return n[0]=p,n[1]=h,n[2]=c,n[3]=g,!1;if(i<a)return n[0]=f,n[1]=h,n[2]=s,n[3]=g,!1}else{var M=o.height/o.width,F=r.height/r.width,G=(g-h)/(a-i),x=void 0,P=void 0,S=void 0,b=void 0,U=void 0,Y=void 0;if(-M===G?i>a?(n[0]=A,n[1]=T,D=!0):(n[0]=f,n[1]=l,D=!0):M===G&&(i>a?(n[0]=p,n[1]=l,D=!0):(n[0]=v,n[1]=T,D=!0)),-F===G?a>i?(n[2]=E,n[3]=L,C=!0):(n[2]=c,n[3]=d,C=!0):F===G&&(a>i?(n[2]=s,n[3]=d,C=!0):(n[2]=O,n[3]=L,C=!0)),D&&C)return!1;if(i>a?h>g?(x=this.getCardinalDirection(M,G,4),P=this.getCardinalDirection(F,G,2)):(x=this.getCardinalDirection(-M,G,3),P=this.getCardinalDirection(-F,G,1)):h>g?(x=this.getCardinalDirection(-M,G,1),P=this.getCardinalDirection(-F,G,3)):(x=this.getCardinalDirection(M,G,2),P=this.getCardinalDirection(F,G,4)),!D)switch(x){case 1:b=l,S=i+-N/G,n[0]=S,n[1]=b;break;case 2:S=v,b=h+y*G,n[0]=S,n[1]=b;break;case 3:b=T,S=i+N/G,n[0]=S,n[1]=b;break;case 4:S=A,b=h+-y*G,n[0]=S,n[1]=b}if(!C)switch(P){case 1:Y=d,U=a+-w/G,n[2]=U,n[3]=Y;break;case 2:U=O,Y=g+I*G,n[2]=U,n[3]=Y;break;case 3:Y=L,U=a+w/G,n[2]=U,n[3]=Y;break;case 4:U=E,Y=g+-I*G,n[2]=U,n[3]=Y}}return!1},t.getCardinalDirection=function(o,r,n){return o>r?n:1+n%4},t.getIntersection=function(o,r,n,i){if(i==null)return this.getIntersection2(o,r,n);var h,a,g,p,l,f,A,T=o.x,v=o.y,y=r.x,N=r.y,s=n.x,d=n.y,c=i.x,E=i.y;return(A=(h=N-v)*(p=s-c)-(a=E-d)*(g=T-y))===0?null:new e((g*(f=c*d-s*E)-p*(l=y*v-T*N))/A,(a*l-h*f)/A)},t.angleOfVector=function(o,r,n,i){var h=void 0;return o!==n?(h=Math.atan((i-r)/(n-o)),n<o?h+=Math.PI:i<r&&(h+=this.TWO_PI)):h=i<r?this.ONE_AND_HALF_PI:this.HALF_PI,h},t.doIntersect=function(o,r,n,i){var h=o.x,a=o.y,g=r.x,p=r.y,l=n.x,f=n.y,A=i.x,T=i.y,v=(g-h)*(T-f)-(A-l)*(p-a);if(v===0)return!1;var y=((T-f)*(A-h)+(l-A)*(T-a))/v,N=((a-p)*(A-h)+(g-h)*(T-a))/v;return 0<y&&y<1&&0<N&&N<1},t.HALF_PI=.5*Math.PI,t.ONE_AND_HALF_PI=1.5*Math.PI,t.TWO_PI=2*Math.PI,t.THREE_PI=3*Math.PI,m.exports=t},function(m,_,u){function e(){}e.sign=function(t){return t>0?1:t<0?-1:0},e.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},e.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},m.exports=e},function(m,_,u){function e(){}e.MAX_VALUE=2147483647,e.MIN_VALUE=-2147483648,m.exports=e},function(m,_,u){var e=(function(){function i(h,a){for(var g=0;g<a.length;g++){var p=a[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,a,g){return a&&i(h.prototype,a),g&&i(h,g),h}})(),t=function(i){return{value:i,next:null,prev:null}},o=function(i,h,a,g){return i!==null?i.next=h:g.head=h,a!==null?a.prev=h:g.tail=h,h.prev=i,h.next=a,g.length++,h},r=function(i,h){var a=i.prev,g=i.next;return a!==null?a.next=g:h.head=g,g!==null?g.prev=a:h.tail=a,i.prev=i.next=null,h.length--,i},n=(function(){function i(h){var a=this;(function(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")})(this,i),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(g){return a.push(g)})}return e(i,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(h,a){return o(a.prev,t(h),a,this)}},{key:"insertAfter",value:function(h,a){return o(a,t(h),a.next,this)}},{key:"insertNodeBefore",value:function(h,a){return o(a.prev,h,a,this)}},{key:"insertNodeAfter",value:function(h,a){return o(a,h,a.next,this)}},{key:"push",value:function(h){return o(this.tail,t(h),null,this)}},{key:"unshift",value:function(h){return o(null,t(h),this.head,this)}},{key:"remove",value:function(h){return r(h,this)}},{key:"pop",value:function(){return r(this.tail,this).value}},{key:"popNode",value:function(){return r(this.tail,this)}},{key:"shift",value:function(){return r(this.head,this).value}},{key:"shiftNode",value:function(){return r(this.head,this)}},{key:"get_object_at",value:function(h){if(h<=this.length()){for(var a=1,g=this.head;a<h;)g=g.next,a++;return g.value}}},{key:"set_object_at",value:function(h,a){if(h<=this.length()){for(var g=1,p=this.head;g<h;)p=p.next,g++;p.value=a}}}]),i})();m.exports=n},function(m,_,u){function e(t,o,r){this.x=null,this.y=null,t==null&&o==null&&r==null?(this.x=0,this.y=0):typeof t=="number"&&typeof o=="number"&&r==null?(this.x=t,this.y=o):t.constructor.name=="Point"&&o==null&&r==null&&(r=t,this.x=r.x,this.y=r.y)}e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.getLocation=function(){return new e(this.x,this.y)},e.prototype.setLocation=function(t,o,r){t.constructor.name=="Point"&&o==null&&r==null?(r=t,this.setLocation(r.x,r.y)):typeof t=="number"&&typeof o=="number"&&r==null&&(parseInt(t)==t&&parseInt(o)==o?this.move(t,o):(this.x=Math.floor(t+.5),this.y=Math.floor(o+.5)))},e.prototype.move=function(t,o){this.x=t,this.y=o},e.prototype.translate=function(t,o){this.x+=t,this.y+=o},e.prototype.equals=function(t){if(t.constructor.name=="Point"){var o=t;return this.x==o.x&&this.y==o.y}return this==t},e.prototype.toString=function(){return new e().constructor.name+"[x="+this.x+",y="+this.y+"]"},m.exports=e},function(m,_,u){function e(t,o,r,n){this.x=0,this.y=0,this.width=0,this.height=0,t!=null&&o!=null&&r!=null&&n!=null&&(this.x=t,this.y=o,this.width=r,this.height=n)}e.prototype.getX=function(){return this.x},e.prototype.setX=function(t){this.x=t},e.prototype.getY=function(){return this.y},e.prototype.setY=function(t){this.y=t},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){this.height=t},e.prototype.getRight=function(){return this.x+this.width},e.prototype.getBottom=function(){return this.y+this.height},e.prototype.intersects=function(t){return!(this.getRight()<t.x||this.getBottom()<t.y||t.getRight()<this.x||t.getBottom()<this.y)},e.prototype.getCenterX=function(){return this.x+this.width/2},e.prototype.getMinX=function(){return this.getX()},e.prototype.getMaxX=function(){return this.getX()+this.width},e.prototype.getCenterY=function(){return this.y+this.height/2},e.prototype.getMinY=function(){return this.getY()},e.prototype.getMaxY=function(){return this.getY()+this.height},e.prototype.getWidthHalf=function(){return this.width/2},e.prototype.getHeightHalf=function(){return this.height/2},m.exports=e},function(m,_,u){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function t(){}t.lastID=0,t.createID=function(o){return t.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=t.getString(),t.lastID++),o.uniqueID)},t.getString=function(o){return o==null&&(o=t.lastID),"Object#"+o},t.isPrimitive=function(o){var r=o===void 0?"undefined":e(o);return o==null||r!="object"&&r!="function"},m.exports=t},function(m,_,u){function e(l){if(Array.isArray(l)){for(var f=0,A=Array(l.length);f<l.length;f++)A[f]=l[f];return A}return Array.from(l)}var t=u(0),o=u(6),r=u(3),n=u(1),i=u(5),h=u(4),a=u(17),g=u(27);function p(l){g.call(this),this.layoutQuality=t.QUALITY,this.createBendsAsNeeded=t.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=t.DEFAULT_INCREMENTAL,this.animationOnLayout=t.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=t.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=t.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=t.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,l!=null&&(this.isRemoteUse=l)}p.RANDOM_SEED=1,p.prototype=Object.create(g.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var l=new o(this);return this.graphManager=l,l},p.prototype.newGraph=function(l){return new i(null,this.graphManager,l)},p.prototype.newNode=function(l){return new r(this.graphManager,l)},p.prototype.newEdge=function(l){return new n(null,null,l)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var l;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),l=!this.checkLayoutSuccess()&&this.layout(),t.ANIMATE!=="during"&&(l&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,l)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var l=this.graphManager.getAllEdges(),f=0;f<l.length;f++)l[f];var A=this.graphManager.getRoot().getNodes();for(f=0;f<A.length;f++)A[f];this.update(this.graphManager.getRoot())}},p.prototype.update=function(l){if(l==null)this.update2();else if(l instanceof r){var f=l;if(f.getChild()!=null)for(var A=f.getChild().getNodes(),T=0;T<A.length;T++)update(A[T]);f.vGraphObject!=null&&f.vGraphObject.update(f)}else if(l instanceof n){var v=l;v.vGraphObject!=null&&v.vGraphObject.update(v)}else if(l instanceof i){var y=l;y.vGraphObject!=null&&y.vGraphObject.update(y)}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=t.QUALITY,this.animationDuringLayout=t.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=t.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=t.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=t.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=t.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=t.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(l){if(l==null)this.transform(new h(0,0));else{var f=new a,A=this.graphManager.getRoot().updateLeftTop();if(A!=null){f.setWorldOrgX(l.x),f.setWorldOrgY(l.y),f.setDeviceOrgX(A.x),f.setDeviceOrgY(A.y);for(var T=this.getAllNodes(),v=0;v<T.length;v++)T[v].transform(f)}}},p.prototype.positionNodesRandomly=function(l){if(l==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var f,A,T=l.getNodes(),v=0;v<T.length;v++)(A=(f=T[v]).getChild())==null||A.getNodes().length==0?f.scatter():(this.positionNodesRandomly(A),f.updateBounds())},p.prototype.getFlatForest=function(){for(var l=[],f=!0,A=this.graphManager.getRoot().getNodes(),T=!0,v=0;v<A.length;v++)A[v].getChild()!=null&&(T=!1);if(!T)return l;var y=new Set,N=[],s=new Map,d=[];for(d=d.concat(A);d.length>0&&f;){for(N.push(d[0]);N.length>0&&f;){var c=N[0];N.splice(0,1),y.add(c);var E=c.getEdges();for(v=0;v<E.length;v++){var L=E[v].getOtherEnd(c);if(s.get(c)!=L){if(y.has(L)){f=!1;break}N.push(L),s.set(L,c)}}}if(f){var O=[].concat(e(y));for(l.push(O),v=0;v<O.length;v++){var I=O[v],w=d.indexOf(I);w>-1&&d.splice(w,1)}y=new Set,s=new Map}else l=[]}return l},p.prototype.createDummyNodesForBendpoints=function(l){for(var f=[],A=l.source,T=this.graphManager.calcLowestCommonAncestor(l.source,l.target),v=0;v<l.bendpoints.length;v++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),T.add(y);var N=this.newEdge(null);this.graphManager.add(N,A,y),f.add(y),A=y}return N=this.newEdge(null),this.graphManager.add(N,A,l.target),this.edgeToDummyNodes.set(l,f),l.isInterGraph()?this.graphManager.remove(l):T.remove(l),f},p.prototype.createBendpointsFromDummyNodes=function(){var l=[];l=l.concat(this.graphManager.getAllEdges()),l=[].concat(e(this.edgeToDummyNodes.keys())).concat(l);for(var f=0;f<l.length;f++){var A=l[f];if(A.bendpoints.length>0){for(var T=this.edgeToDummyNodes.get(A),v=0;v<T.length;v++){var y=T[v],N=new h(y.getCenterX(),y.getCenterY()),s=A.bendpoints.get(v);s.x=N.x,s.y=N.y,y.getOwner().remove(y)}this.graphManager.add(A,A.source,A.target)}}},p.transform=function(l,f,A,T){if(A!=null&&T!=null){var v=f;return l<=50?v-=(f-f/A)/50*(50-l):v+=(f*T-f)/50*(l-50),v}var y,N;return l<=50?(y=9*f/500,N=f/10):(y=9*f/50,N=-8*f),y*l+N},p.findCenterOfTree=function(l){var f=[];f=f.concat(l);var A=[],T=new Map,v=!1,y=null;f.length!=1&&f.length!=2||(v=!0,y=f[0]);for(var N=0;N<f.length;N++){var s=(E=f[N]).getNeighborsList().size;T.set(E,E.getNeighborsList().size),s==1&&A.push(E)}var d=[];for(d=d.concat(A);!v;){var c=[];for(c=c.concat(d),d=[],N=0;N<f.length;N++){var E=f[N],L=f.indexOf(E);L>=0&&f.splice(L,1),E.getNeighborsList().forEach(function(O){if(A.indexOf(O)<0){var I=T.get(O)-1;I==1&&d.push(O),T.set(O,I)}})}A=A.concat(d),f.length!=1&&f.length!=2||(v=!0,y=f[0])}return y},p.prototype.setGraphManager=function(l){this.graphManager=l},m.exports=p},function(m,_,u){function e(){}e.seed=1,e.x=0,e.nextDouble=function(){return e.x=1e4*Math.sin(e.seed++),e.x-Math.floor(e.x)},m.exports=e},function(m,_,u){var e=u(4);function t(o,r){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}t.prototype.getWorldOrgX=function(){return this.lworldOrgX},t.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},t.prototype.getWorldOrgY=function(){return this.lworldOrgY},t.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},t.prototype.getWorldExtX=function(){return this.lworldExtX},t.prototype.setWorldExtX=function(o){this.lworldExtX=o},t.prototype.getWorldExtY=function(){return this.lworldExtY},t.prototype.setWorldExtY=function(o){this.lworldExtY=o},t.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},t.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},t.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},t.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},t.prototype.getDeviceExtX=function(){return this.ldeviceExtX},t.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},t.prototype.getDeviceExtY=function(){return this.ldeviceExtY},t.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},t.prototype.transformX=function(o){var r=0,n=this.lworldExtX;return n!=0&&(r=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/n),r},t.prototype.transformY=function(o){var r=0,n=this.lworldExtY;return n!=0&&(r=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/n),r},t.prototype.inverseTransformX=function(o){var r=0,n=this.ldeviceExtX;return n!=0&&(r=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/n),r},t.prototype.inverseTransformY=function(o){var r=0,n=this.ldeviceExtY;return n!=0&&(r=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/n),r},t.prototype.inverseTransformPoint=function(o){return new e(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},m.exports=t},function(m,_,u){var e=u(15),t=u(7),o=u(0),r=u(8),n=u(9);function i(){e.call(this),this.useSmartIdealEdgeLengthCalculation=t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=t.DEFAULT_EDGE_LENGTH,this.springConstant=t.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=t.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=t.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=t.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*t.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=t.MAX_ITERATIONS}for(var h in i.prototype=Object.create(e.prototype),e)i[h]=e[h];i.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},i.prototype.calcIdealEdgeLengths=function(){for(var a,g,p,l,f,A,T=this.getGraphManager().getAllEdges(),v=0;v<T.length;v++)(a=T[v]).idealLength=this.idealEdgeLength,a.isInterGraph&&(p=a.getSource(),l=a.getTarget(),f=a.getSourceInLca().getEstimatedSize(),A=a.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(a.idealLength+=f+A-2*o.SIMPLE_NODE_SIZE),g=a.getLca().getInclusionTreeDepth(),a.idealLength+=t.DEFAULT_EDGE_LENGTH*t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*g))},i.prototype.initSpringEmbedder=function(){var a=this.getAllNodes().length;this.incremental?(a>t.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*t.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(a-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-t.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT_INCREMENTAL):(a>t.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(t.COOLING_ADAPTATION_FACTOR,1-(a-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*(1-t.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},i.prototype.calcSpringForces=function(){for(var a,g=this.getAllEdges(),p=0;p<g.length;p++)a=g[p],this.calcSpringForce(a,a.idealLength)},i.prototype.calcRepulsionForces=function(){var a,g,p,l,f,A=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],v=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&A&&this.updateGrid(),f=new Set,a=0;a<v.length;a++)p=v[a],this.calculateRepulsionForceOfANode(p,f,A,T),f.add(p);else for(a=0;a<v.length;a++)for(p=v[a],g=a+1;g<v.length;g++)l=v[g],p.getOwner()==l.getOwner()&&this.calcRepulsionForce(p,l)},i.prototype.calcGravitationalForces=function(){for(var a,g=this.getAllNodesToApplyGravitation(),p=0;p<g.length;p++)a=g[p],this.calcGravitationalForce(a)},i.prototype.moveNodes=function(){for(var a=this.getAllNodes(),g=0;g<a.length;g++)a[g].move()},i.prototype.calcSpringForce=function(a,g){var p,l,f,A,T=a.getSource(),v=a.getTarget();if(this.uniformLeafNodeSizes&&T.getChild()==null&&v.getChild()==null)a.updateLengthSimple();else if(a.updateLength(),a.isOverlapingSourceAndTarget)return;(p=a.getLength())!=0&&(f=(l=this.springConstant*(p-g))*(a.lengthX/p),A=l*(a.lengthY/p),T.springForceX+=f,T.springForceY+=A,v.springForceX-=f,v.springForceY-=A)},i.prototype.calcRepulsionForce=function(a,g){var p,l,f,A,T,v,y,N=a.getRect(),s=g.getRect(),d=new Array(2),c=new Array(4);if(N.intersects(s)){r.calcSeparationAmount(N,s,d,t.DEFAULT_EDGE_LENGTH/2),v=2*d[0],y=2*d[1];var E=a.noOfChildren*g.noOfChildren/(a.noOfChildren+g.noOfChildren);a.repulsionForceX-=E*v,a.repulsionForceY-=E*y,g.repulsionForceX+=E*v,g.repulsionForceY+=E*y}else this.uniformLeafNodeSizes&&a.getChild()==null&&g.getChild()==null?(p=s.getCenterX()-N.getCenterX(),l=s.getCenterY()-N.getCenterY()):(r.getIntersection(N,s,c),p=c[2]-c[0],l=c[3]-c[1]),Math.abs(p)<t.MIN_REPULSION_DIST&&(p=n.sign(p)*t.MIN_REPULSION_DIST),Math.abs(l)<t.MIN_REPULSION_DIST&&(l=n.sign(l)*t.MIN_REPULSION_DIST),f=p*p+l*l,A=Math.sqrt(f),v=(T=this.repulsionConstant*a.noOfChildren*g.noOfChildren/f)*p/A,y=T*l/A,a.repulsionForceX-=v,a.repulsionForceY-=y,g.repulsionForceX+=v,g.repulsionForceY+=y},i.prototype.calcGravitationalForce=function(a){var g,p,l,f,A,T,v,y;p=((g=a.getOwner()).getRight()+g.getLeft())/2,l=(g.getTop()+g.getBottom())/2,f=a.getCenterX()-p,A=a.getCenterY()-l,T=Math.abs(f)+a.getWidth()/2,v=Math.abs(A)+a.getHeight()/2,a.getOwner()==this.graphManager.getRoot()?(T>(y=g.getEstimatedSize()*this.gravityRangeFactor)||v>y)&&(a.gravitationForceX=-this.gravityConstant*f,a.gravitationForceY=-this.gravityConstant*A):(T>(y=g.getEstimatedSize()*this.compoundGravityRangeFactor)||v>y)&&(a.gravitationForceX=-this.gravityConstant*f*this.compoundGravityConstant,a.gravitationForceY=-this.gravityConstant*A*this.compoundGravityConstant)},i.prototype.isConverged=function(){var a,g=!1;return this.totalIterations>this.maxIterations/3&&(g=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),a=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,a||g},i.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},i.prototype.calcNoOfChildrenForAllNodes=function(){for(var a,g=this.graphManager.getAllNodes(),p=0;p<g.length;p++)(a=g[p]).noOfChildren=a.getNoOfChildren()},i.prototype.calcGrid=function(a){var g,p;g=parseInt(Math.ceil((a.getRight()-a.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((a.getBottom()-a.getTop())/this.repulsionRange));for(var l=new Array(g),f=0;f<g;f++)l[f]=new Array(p);for(f=0;f<g;f++)for(var A=0;A<p;A++)l[f][A]=new Array;return l},i.prototype.addNodeToGrid=function(a,g,p){var l,f,A,T;l=parseInt(Math.floor((a.getRect().x-g)/this.repulsionRange)),f=parseInt(Math.floor((a.getRect().width+a.getRect().x-g)/this.repulsionRange)),A=parseInt(Math.floor((a.getRect().y-p)/this.repulsionRange)),T=parseInt(Math.floor((a.getRect().height+a.getRect().y-p)/this.repulsionRange));for(var v=l;v<=f;v++)for(var y=A;y<=T;y++)this.grid[v][y].push(a),a.setGridCoordinates(l,f,A,T)},i.prototype.updateGrid=function(){var a,g,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),a=0;a<p.length;a++)g=p[a],this.addNodeToGrid(g,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},i.prototype.calculateRepulsionForceOfANode=function(a,g,p,l){if(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&p||l){var f,A=new Set;a.surrounding=new Array;for(var T=this.grid,v=a.startX-1;v<a.finishX+2;v++)for(var y=a.startY-1;y<a.finishY+2;y++)if(!(v<0||y<0||v>=T.length||y>=T[0].length)){for(var N=0;N<T[v][y].length;N++)if(f=T[v][y][N],a.getOwner()==f.getOwner()&&a!=f&&!g.has(f)&&!A.has(f)){var s=Math.abs(a.getCenterX()-f.getCenterX())-(a.getWidth()/2+f.getWidth()/2),d=Math.abs(a.getCenterY()-f.getCenterY())-(a.getHeight()/2+f.getHeight()/2);s<=this.repulsionRange&&d<=this.repulsionRange&&A.add(f)}}a.surrounding=[].concat((function(c){if(Array.isArray(c)){for(var E=0,L=Array(c.length);E<c.length;E++)L[E]=c[E];return L}return Array.from(c)})(A))}for(v=0;v<a.surrounding.length;v++)this.calcRepulsionForce(a,a.surrounding[v])},i.prototype.calcRepulsionRange=function(){return 0},m.exports=i},function(m,_,u){var e=u(1),t=u(7);function o(n,i,h){e.call(this,n,i,h),this.idealLength=t.DEFAULT_EDGE_LENGTH}for(var r in o.prototype=Object.create(e.prototype),e)o[r]=e[r];m.exports=o},function(m,_,u){var e=u(3);function t(r,n,i,h){e.call(this,r,n,i,h),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];t.prototype.setGridCoordinates=function(r,n,i,h){this.startX=r,this.finishX=n,this.startY=i,this.finishY=h},m.exports=t},function(m,_,u){function e(t,o){this.width=0,this.height=0,t!==null&&o!==null&&(this.height=o,this.width=t)}e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){this.height=t},m.exports=e},function(m,_,u){var e=u(14);function t(){this.map={},this.keys=[]}t.prototype.put=function(o,r){var n=e.createID(o);this.contains(n)||(this.map[n]=r,this.keys.push(o))},t.prototype.contains=function(o){return e.createID(o),this.map[o]!=null},t.prototype.get=function(o){var r=e.createID(o);return this.map[r]},t.prototype.keySet=function(){return this.keys},m.exports=t},function(m,_,u){var e=u(14);function t(){this.set={}}t.prototype.add=function(o){var r=e.createID(o);this.contains(r)||(this.set[r]=o)},t.prototype.remove=function(o){delete this.set[e.createID(o)]},t.prototype.clear=function(){this.set={}},t.prototype.contains=function(o){return this.set[e.createID(o)]==o},t.prototype.isEmpty=function(){return this.size()===0},t.prototype.size=function(){return Object.keys(this.set).length},t.prototype.addAllTo=function(o){for(var r=Object.keys(this.set),n=r.length,i=0;i<n;i++)o.push(this.set[r[i]])},t.prototype.size=function(){return Object.keys(this.set).length},t.prototype.addAll=function(o){for(var r=o.length,n=0;n<r;n++){var i=o[n];this.add(i)}},m.exports=t},function(m,_,u){var e=(function(){function r(n,i){for(var h=0;h<i.length;h++){var a=i[h];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(n,i,h){return i&&r(n.prototype,i),h&&r(n,h),n}})(),t=u(11),o=(function(){function r(n,i){(function(a,g){if(!(a instanceof g))throw new TypeError("Cannot call a class as a function")})(this,r),i===null&&i===void 0||(this.compareFunction=this._defaultCompareFunction);var h=void 0;h=n instanceof t?n.size():n.length,this._quicksort(n,0,h-1)}return e(r,[{key:"_quicksort",value:function(n,i,h){if(i<h){var a=this._partition(n,i,h);this._quicksort(n,i,a),this._quicksort(n,a+1,h)}}},{key:"_partition",value:function(n,i,h){for(var a=this._get(n,i),g=i,p=h;;){for(;this.compareFunction(a,this._get(n,p));)p--;for(;this.compareFunction(this._get(n,g),a);)g++;if(!(g<p))return p;this._swap(n,g,p),g++,p--}}},{key:"_get",value:function(n,i){return n instanceof t?n.get_object_at(i):n[i]}},{key:"_set",value:function(n,i,h){n instanceof t?n.set_object_at(i,h):n[i]=h}},{key:"_swap",value:function(n,i,h){var a=this._get(n,i);this._set(n,i,this._get(n,h)),this._set(n,h,a)}},{key:"_defaultCompareFunction",value:function(n,i){return i>n}}]),r})();m.exports=o},function(m,_,u){var e=(function(){function o(r,n){for(var i=0;i<n.length;i++){var h=n[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,h.key,h)}}return function(r,n,i){return n&&o(r.prototype,n),i&&o(r,i),r}})(),t=(function(){function o(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;(function(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")})(this,o),this.sequence1=r,this.sequence2=n,this.match_score=i,this.mismatch_penalty=h,this.gap_penalty=a,this.iMax=r.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.grid[g]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[g][p]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var f=0;f<this.jMax;f++)this.tracebackGrid[l][f]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return e(o,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var r=1;r<this.jMax;r++)this.grid[0][r]=this.grid[0][r-1]+this.gap_penalty,this.tracebackGrid[0][r]=[!1,!1,!0];for(var n=1;n<this.iMax;n++)this.grid[n][0]=this.grid[n-1][0]+this.gap_penalty,this.tracebackGrid[n][0]=[!1,!0,!1];for(var i=1;i<this.iMax;i++)for(var h=1;h<this.jMax;h++){var a=[this.sequence1[i-1]===this.sequence2[h-1]?this.grid[i-1][h-1]+this.match_score:this.grid[i-1][h-1]+this.mismatch_penalty,this.grid[i-1][h]+this.gap_penalty,this.grid[i][h-1]+this.gap_penalty],g=this.arrayAllMaxIndexes(a);this.grid[i][h]=a[g[0]],this.tracebackGrid[i][h]=[g.includes(0),g.includes(1),g.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var r=[];for(r.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});r[0];){var n=r[0],i=this.tracebackGrid[n.pos[0]][n.pos[1]];i[0]&&r.push({pos:[n.pos[0]-1,n.pos[1]-1],seq1:this.sequence1[n.pos[0]-1]+n.seq1,seq2:this.sequence2[n.pos[1]-1]+n.seq2}),i[1]&&r.push({pos:[n.pos[0]-1,n.pos[1]],seq1:this.sequence1[n.pos[0]-1]+n.seq1,seq2:"-"+n.seq2}),i[2]&&r.push({pos:[n.pos[0],n.pos[1]-1],seq1:"-"+n.seq1,seq2:this.sequence2[n.pos[1]-1]+n.seq2}),n.pos[0]===0&&n.pos[1]===0&&this.alignments.push({sequence1:n.seq1,sequence2:n.seq2}),r.shift()}return this.alignments}},{key:"getAllIndexes",value:function(r,n){for(var i=[],h=-1;(h=r.indexOf(n,h+1))!==-1;)i.push(h);return i}},{key:"arrayAllMaxIndexes",value:function(r){return this.getAllIndexes(r,Math.max.apply(null,r))}}]),o})();m.exports=t},function(m,_,u){var e=function(){};e.FDLayout=u(18),e.FDLayoutConstants=u(7),e.FDLayoutEdge=u(19),e.FDLayoutNode=u(20),e.DimensionD=u(21),e.HashMap=u(22),e.HashSet=u(23),e.IGeometry=u(8),e.IMath=u(9),e.Integer=u(10),e.Point=u(12),e.PointD=u(4),e.RandomSeed=u(16),e.RectangleD=u(13),e.Transform=u(17),e.UniqueIDGeneretor=u(14),e.Quicksort=u(24),e.LinkedList=u(11),e.LGraphObject=u(2),e.LGraph=u(5),e.LEdge=u(1),e.LGraphManager=u(6),e.LNode=u(3),e.Layout=u(15),e.LayoutConstants=u(0),e.NeedlemanWunsch=u(25),m.exports=e},function(m,_,u){function e(){this.listeners=[]}var t=e.prototype;t.addListener=function(o,r){this.listeners.push({event:o,callback:r})},t.removeListener=function(o,r){for(var n=this.listeners.length;n>=0;n--){var i=this.listeners[n];i.event===o&&i.callback===r&&this.listeners.splice(n,1)}},t.emit=function(o,r){for(var n=0;n<this.listeners.length;n++){var i=this.listeners[n];o===i.event&&i.callback(r)}},m.exports=e}])},Z.exports=R());var R}var Q,$,K,J,ut=($||($=1,q.exports=(K=Q?z.exports:(Q=1,J=function(R){return(function(m){var _={};function u(e){if(_[e])return _[e].exports;var t=_[e]={i:e,l:!1,exports:{}};return m[e].call(t.exports,t,t.exports,u),t.l=!0,t.exports}return u.m=m,u.c=_,u.i=function(e){return e},u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u(u.s=7)})([function(m,_){m.exports=R},function(m,_,u){var e=u(0).FDLayoutConstants;function t(){}for(var o in e)t[o]=e[o];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=e.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TREE_REDUCTION_ON_INCREMENTAL=!1,m.exports=t},function(m,_,u){var e=u(0).FDLayoutEdge;function t(r,n,i){e.call(this,r,n,i)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];m.exports=t},function(m,_,u){var e=u(0).LGraph;function t(r,n,i){e.call(this,r,n,i)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];m.exports=t},function(m,_,u){var e=u(0).LGraphManager;function t(r){e.call(this,r)}for(var o in t.prototype=Object.create(e.prototype),e)t[o]=e[o];m.exports=t},function(m,_,u){var e=u(0).FDLayoutNode,t=u(0).IMath;function o(n,i,h,a){e.call(this,n,i,h,a)}for(var r in o.prototype=Object.create(e.prototype),e)o[r]=e[r];o.prototype.move=function(){var n=this.graphManager.getLayout();this.displacementX=n.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=n.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>n.coolingFactor*n.maxNodeDisplacement&&(this.displacementX=n.coolingFactor*n.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>n.coolingFactor*n.maxNodeDisplacement&&(this.displacementY=n.coolingFactor*n.maxNodeDisplacement*t.sign(this.displacementY)),this.child==null||this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),n.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(n,i){for(var h,a=this.getChild().getNodes(),g=0;g<a.length;g++)(h=a[g]).getChild()==null?(h.moveBy(n,i),h.displacementX+=n,h.displacementY+=i):h.propogateDisplacementToChildren(n,i)},o.prototype.setPred1=function(n){this.pred1=n},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(n){this.next=n},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(n){this.processed=n},o.prototype.isProcessed=function(){return processed},m.exports=o},function(m,_,u){var e=u(0).FDLayout,t=u(4),o=u(3),r=u(5),n=u(2),i=u(1),h=u(0).FDLayoutConstants,a=u(0).LayoutConstants,g=u(0).Point,p=u(0).PointD,l=u(0).Layout,f=u(0).Integer,A=u(0).IGeometry,T=u(0).LGraph,v=u(0).Transform;function y(){e.call(this),this.toBeTiled={}}for(var N in y.prototype=Object.create(e.prototype),e)y[N]=e[N];y.prototype.newGraphManager=function(){var s=new t(this);return this.graphManager=s,s},y.prototype.newGraph=function(s){return new o(null,this.graphManager,s)},y.prototype.newNode=function(s){return new r(this.graphManager,s)},y.prototype.newEdge=function(s){return new n(null,null,s)},y.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.isSubLayout||(i.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},y.prototype.layout=function(){return a.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)i.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),d=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(E){return d.has(E)}),this.graphManager.setAllNodesToApplyGravitation(c));else{var s=this.getFlatForest();if(s.length>0)this.positionNodesRadially(s);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var d=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(E){return d.has(E)});this.graphManager.setAllNodesToApplyGravitation(c),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var s=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(L){return s.has(L)});this.graphManager.setAllNodesToApplyGravitation(d),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var c=!this.isTreeGrowing&&!this.isGrowthFinished,E=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(c,E),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},y.prototype.getPositionsData=function(){for(var s=this.graphManager.getAllNodes(),d={},c=0;c<s.length;c++){var E=s[c].rect,L=s[c].id;d[L]={id:L,x:E.getCenterX(),y:E.getCenterY(),w:E.width,h:E.height}}return d},y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var s=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!s;)s=this.tick();this.graphManager.updateBounds()}},y.prototype.calculateNodesToApplyGravitationTo=function(){var s,d,c=[],E=this.graphManager.getGraphs(),L=E.length;for(d=0;d<L;d++)(s=E[d]).updateConnected(),s.isConnected||(c=c.concat(s.getNodes()));return c},y.prototype.createBendpoints=function(){var s=[];s=s.concat(this.graphManager.getAllEdges());var d,c=new Set;for(d=0;d<s.length;d++){var E=s[d];if(!c.has(E)){var L=E.getSource(),O=E.getTarget();if(L==O)E.getBendpoints().push(new p),E.getBendpoints().push(new p),this.createDummyNodesForBendpoints(E),c.add(E);else{var I=[];if(I=(I=I.concat(L.getEdgeListToNode(O))).concat(O.getEdgeListToNode(L)),!c.has(I[0])){var w;if(I.length>1)for(w=0;w<I.length;w++){var D=I[w];D.getBendpoints().push(new p),this.createDummyNodesForBendpoints(D)}I.forEach(function(C){c.add(C)})}}}if(c.size==s.length)break}},y.prototype.positionNodesRadially=function(s){for(var d=new g(0,0),c=Math.ceil(Math.sqrt(s.length)),E=0,L=0,O=0,I=new p(0,0),w=0;w<s.length;w++){w%c==0&&(O=0,L=E,w!=0&&(L+=i.DEFAULT_COMPONENT_SEPERATION),E=0);var D=s[w],C=l.findCenterOfTree(D);d.x=O,d.y=L,(I=y.radialLayout(D,C,d)).y>E&&(E=Math.floor(I.y)),O=Math.floor(I.x+i.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(a.WORLD_CENTER_X-I.x/2,a.WORLD_CENTER_Y-I.y/2))},y.radialLayout=function(s,d,c){var E=Math.max(this.maxDiagonalInTree(s),i.DEFAULT_RADIAL_SEPARATION);y.branchRadialLayout(d,null,0,359,0,E);var L=T.calculateBounds(s),O=new v;O.setDeviceOrgX(L.getMinX()),O.setDeviceOrgY(L.getMinY()),O.setWorldOrgX(c.x),O.setWorldOrgY(c.y);for(var I=0;I<s.length;I++)s[I].transform(O);var w=new p(L.getMaxX(),L.getMaxY());return O.inverseTransformPoint(w)},y.branchRadialLayout=function(s,d,c,E,L,O){var I=(E-c+1)/2;I<0&&(I+=180);var w=(I+c)%360*A.TWO_PI/360,D=L*Math.cos(w),C=L*Math.sin(w);s.setCenter(D,C);var M=[],F=(M=M.concat(s.getEdges())).length;d!=null&&F--;for(var G,x=0,P=M.length,S=s.getEdgesBetween(d);S.length>1;){var b=S[0];S.splice(0,1);var U=M.indexOf(b);U>=0&&M.splice(U,1),P--,F--}G=d!=null?(M.indexOf(S[0])+1)%P:0;for(var Y=Math.abs(E-c)/F,B=G;x!=F;B=++B%P){var k=M[B].getOtherEnd(s);if(k!=d){var W=(c+x*Y)%360,at=(W+Y)%360;y.branchRadialLayout(k,s,W,at,L+O,O),x++}}},y.maxDiagonalInTree=function(s){for(var d=f.MIN_VALUE,c=0;c<s.length;c++){var E=s[c].getDiagonal();E>d&&(d=E)}return d},y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},y.prototype.groupZeroDegreeMembers=function(){var s=this,d={};this.memberGroups={},this.idToDummyNode={};for(var c=[],E=this.graphManager.getAllNodes(),L=0;L<E.length;L++){var O=(I=E[L]).getParent();this.getNodeDegreeWithChildren(I)!==0||O.id!=null&&this.getToBeTiled(O)||c.push(I)}for(L=0;L<c.length;L++){var I,w=(I=c[L]).getParent().id;d[w]===void 0&&(d[w]=[]),d[w]=d[w].concat(I)}Object.keys(d).forEach(function(D){if(d[D].length>1){var C="DummyCompound_"+D;s.memberGroups[C]=d[D];var M=d[D][0].getParent(),F=new r(s.graphManager);F.id=C,F.paddingLeft=M.paddingLeft||0,F.paddingRight=M.paddingRight||0,F.paddingBottom=M.paddingBottom||0,F.paddingTop=M.paddingTop||0,s.idToDummyNode[C]=F;var G=s.getGraphManager().add(s.newGraph(),F),x=M.getChild();x.add(F);for(var P=0;P<d[D].length;P++){var S=d[D][P];x.remove(S),G.add(S)}}})},y.prototype.clearCompounds=function(){var s={},d={};this.performDFSOnCompounds();for(var c=0;c<this.compoundOrder.length;c++)d[this.compoundOrder[c].id]=this.compoundOrder[c],s[this.compoundOrder[c].id]=[].concat(this.compoundOrder[c].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[c].getChild()),this.compoundOrder[c].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(s,d)},y.prototype.clearZeroDegreeMembers=function(){var s=this,d=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(c){var E=s.idToDummyNode[c];d[c]=s.tileNodes(s.memberGroups[c],E.paddingLeft+E.paddingRight),E.rect.width=d[c].width,E.rect.height=d[c].height})},y.prototype.repopulateCompounds=function(){for(var s=this.compoundOrder.length-1;s>=0;s--){var d=this.compoundOrder[s],c=d.id,E=d.paddingLeft,L=d.paddingTop;this.adjustLocations(this.tiledMemberPack[c],d.rect.x,d.rect.y,E,L)}},y.prototype.repopulateZeroDegreeMembers=function(){var s=this,d=this.tiledZeroDegreePack;Object.keys(d).forEach(function(c){var E=s.idToDummyNode[c],L=E.paddingLeft,O=E.paddingTop;s.adjustLocations(d[c],E.rect.x,E.rect.y,L,O)})},y.prototype.getToBeTiled=function(s){var d=s.id;if(this.toBeTiled[d]!=null)return this.toBeTiled[d];var c=s.getChild();if(c==null)return this.toBeTiled[d]=!1,!1;for(var E=c.getNodes(),L=0;L<E.length;L++){var O=E[L];if(this.getNodeDegree(O)>0)return this.toBeTiled[d]=!1,!1;if(O.getChild()!=null){if(!this.getToBeTiled(O))return this.toBeTiled[d]=!1,!1}else this.toBeTiled[O.id]=!1}return this.toBeTiled[d]=!0,!0},y.prototype.getNodeDegree=function(s){s.id;for(var d=s.getEdges(),c=0,E=0;E<d.length;E++){var L=d[E];L.getSource().id!==L.getTarget().id&&(c+=1)}return c},y.prototype.getNodeDegreeWithChildren=function(s){var d=this.getNodeDegree(s);if(s.getChild()==null)return d;for(var c=s.getChild().getNodes(),E=0;E<c.length;E++){var L=c[E];d+=this.getNodeDegreeWithChildren(L)}return d},y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},y.prototype.fillCompexOrderByDFS=function(s){for(var d=0;d<s.length;d++){var c=s[d];c.getChild()!=null&&this.fillCompexOrderByDFS(c.getChild().getNodes()),this.getToBeTiled(c)&&this.compoundOrder.push(c)}},y.prototype.adjustLocations=function(s,d,c,E,L){c+=L;for(var O=d+=E,I=0;I<s.rows.length;I++){var w=s.rows[I];d=O;for(var D=0,C=0;C<w.length;C++){var M=w[C];M.rect.x=d,M.rect.y=c,d+=M.rect.width+s.horizontalPadding,M.rect.height>D&&(D=M.rect.height)}c+=D+s.verticalPadding}},y.prototype.tileCompoundMembers=function(s,d){var c=this;this.tiledMemberPack=[],Object.keys(s).forEach(function(E){var L=d[E];c.tiledMemberPack[E]=c.tileNodes(s[E],L.paddingLeft+L.paddingRight),L.rect.width=c.tiledMemberPack[E].width,L.rect.height=c.tiledMemberPack[E].height})},y.prototype.tileNodes=function(s,d){var c={rows:[],rowWidth:[],rowHeight:[],width:0,height:d,verticalPadding:i.TILING_PADDING_VERTICAL,horizontalPadding:i.TILING_PADDING_HORIZONTAL};s.sort(function(O,I){return O.rect.width*O.rect.height>I.rect.width*I.rect.height?-1:O.rect.width*O.rect.height<I.rect.width*I.rect.height?1:0});for(var E=0;E<s.length;E++){var L=s[E];c.rows.length==0?this.insertNodeToRow(c,L,0,d):this.canAddHorizontal(c,L.rect.width,L.rect.height)?this.insertNodeToRow(c,L,this.getShortestRowIndex(c),d):this.insertNodeToRow(c,L,c.rows.length,d),this.shiftToLastRow(c)}return c},y.prototype.insertNodeToRow=function(s,d,c,E){var L=E;c==s.rows.length&&(s.rows.push([]),s.rowWidth.push(L),s.rowHeight.push(0));var O=s.rowWidth[c]+d.rect.width;s.rows[c].length>0&&(O+=s.horizontalPadding),s.rowWidth[c]=O,s.width<O&&(s.width=O);var I=d.rect.height;c>0&&(I+=s.verticalPadding);var w=0;I>s.rowHeight[c]&&(w=s.rowHeight[c],s.rowHeight[c]=I,w=s.rowHeight[c]-w),s.height+=w,s.rows[c].push(d)},y.prototype.getShortestRowIndex=function(s){for(var d=-1,c=Number.MAX_VALUE,E=0;E<s.rows.length;E++)s.rowWidth[E]<c&&(d=E,c=s.rowWidth[E]);return d},y.prototype.getLongestRowIndex=function(s){for(var d=-1,c=Number.MIN_VALUE,E=0;E<s.rows.length;E++)s.rowWidth[E]>c&&(d=E,c=s.rowWidth[E]);return d},y.prototype.canAddHorizontal=function(s,d,c){var E=this.getShortestRowIndex(s);if(E<0)return!0;var L=s.rowWidth[E];if(L+s.horizontalPadding+d<=s.width)return!0;var O,I,w=0;return s.rowHeight[E]<c&&E>0&&(w=c+s.verticalPadding-s.rowHeight[E]),O=s.width-L>=d+s.horizontalPadding?(s.height+w)/(L+d+s.horizontalPadding):(s.height+w)/s.width,w=c+s.verticalPadding,(I=s.width<d?(s.height+w)/d:(s.height+w)/s.width)<1&&(I=1/I),O<1&&(O=1/O),O<I},y.prototype.shiftToLastRow=function(s){var d=this.getLongestRowIndex(s),c=s.rowWidth.length-1,E=s.rows[d],L=E[E.length-1],O=L.width+s.horizontalPadding;if(s.width-s.rowWidth[c]>O&&d!=c){E.splice(-1,1),s.rows[c].push(L),s.rowWidth[d]=s.rowWidth[d]-O,s.rowWidth[c]=s.rowWidth[c]+O,s.width=s.rowWidth[instance.getLongestRowIndex(s)];for(var I=Number.MIN_VALUE,w=0;w<E.length;w++)E[w].height>I&&(I=E[w].height);d>0&&(I+=s.verticalPadding);var D=s.rowHeight[d]+s.rowHeight[c];s.rowHeight[d]=I,s.rowHeight[c]<L.height+s.verticalPadding&&(s.rowHeight[c]=L.height+s.verticalPadding);var C=s.rowHeight[d]+s.rowHeight[c];s.height+=C-D,this.shiftToLastRow(s)}},y.prototype.tilingPreLayout=function(){i.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},y.prototype.tilingPostLayout=function(){i.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},y.prototype.reduceTrees=function(){for(var s,d=[],c=!0;c;){var E=this.graphManager.getAllNodes(),L=[];c=!1;for(var O=0;O<E.length;O++)(s=E[O]).getEdges().length!=1||s.getEdges()[0].isInterGraph||s.getChild()!=null||(L.push([s,s.getEdges()[0],s.getOwner()]),c=!0);if(c==1){for(var I=[],w=0;w<L.length;w++)L[w][0].getEdges().length==1&&(I.push(L[w]),L[w][0].getOwner().remove(L[w][0]));d.push(I),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=d},y.prototype.growTree=function(s){for(var d,c=s[s.length-1],E=0;E<c.length;E++)d=c[E],this.findPlaceforPrunedNode(d),d[2].add(d[0]),d[2].add(d[1],d[1].source,d[1].target);s.splice(s.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},y.prototype.findPlaceforPrunedNode=function(s){var d,c,E=s[0],L=(c=E==s[1].source?s[1].target:s[1].source).startX,O=c.finishX,I=c.startY,w=c.finishY,D=[0,0,0,0];if(I>0)for(var C=L;C<=O;C++)D[0]+=this.grid[C][I-1].length+this.grid[C][I].length-1;if(O<this.grid.length-1)for(C=I;C<=w;C++)D[1]+=this.grid[O+1][C].length+this.grid[O][C].length-1;if(w<this.grid[0].length-1)for(C=L;C<=O;C++)D[2]+=this.grid[C][w+1].length+this.grid[C][w].length-1;if(L>0)for(C=I;C<=w;C++)D[3]+=this.grid[L-1][C].length+this.grid[L][C].length-1;for(var M,F,G=f.MAX_VALUE,x=0;x<D.length;x++)D[x]<G?(G=D[x],M=1,F=x):D[x]==G&&M++;if(M==3&&G==0)D[0]==0&&D[1]==0&&D[2]==0?d=1:D[0]==0&&D[1]==0&&D[3]==0?d=0:D[0]==0&&D[2]==0&&D[3]==0?d=3:D[1]==0&&D[2]==0&&D[3]==0&&(d=2);else if(M==2&&G==0){var P=Math.floor(2*Math.random());d=D[0]==0&&D[1]==0?P==0?0:1:D[0]==0&&D[2]==0?P==0?0:2:D[0]==0&&D[3]==0?P==0?0:3:D[1]==0&&D[2]==0?P==0?1:2:D[1]==0&&D[3]==0?P==0?1:3:P==0?2:3}else d=M==4&&G==0?P=Math.floor(4*Math.random()):F;d==0?E.setCenter(c.getCenterX(),c.getCenterY()-c.getHeight()/2-h.DEFAULT_EDGE_LENGTH-E.getHeight()/2):d==1?E.setCenter(c.getCenterX()+c.getWidth()/2+h.DEFAULT_EDGE_LENGTH+E.getWidth()/2,c.getCenterY()):d==2?E.setCenter(c.getCenterX(),c.getCenterY()+c.getHeight()/2+h.DEFAULT_EDGE_LENGTH+E.getHeight()/2):E.setCenter(c.getCenterX()-c.getWidth()/2-h.DEFAULT_EDGE_LENGTH-E.getWidth()/2,c.getCenterY())},m.exports=y},function(m,_,u){var e={};e.layoutBase=u(0),e.CoSEConstants=u(1),e.CoSEEdge=u(2),e.CoSEGraph=u(3),e.CoSEGraphManager=u(4),e.CoSELayout=u(6),e.CoSENode=u(5),m.exports=e}])},z.exports=J(gt())),(function(R){var m={};function _(u){if(m[u])return m[u].exports;var e=m[u]={i:u,l:!1,exports:{}};return R[u].call(e.exports,e,e.exports,_),e.l=!0,e.exports}return _.m=R,_.c=m,_.i=function(u){return u},_.d=function(u,e,t){_.o(u,e)||Object.defineProperty(u,e,{configurable:!1,enumerable:!0,get:t})},_.n=function(u){var e=u&&u.__esModule?function(){return u.default}:function(){return u};return _.d(e,"a",e),e},_.o=function(u,e){return Object.prototype.hasOwnProperty.call(u,e)},_.p="",_(_.s=1)})([function(R,m){R.exports=K},function(R,m,_){var u=_(0).layoutBase.LayoutConstants,e=_(0).layoutBase.FDLayoutConstants,t=_(0).CoSEConstants,o=_(0).CoSELayout,r=_(0).CoSENode,n=_(0).layoutBase.PointD,i=_(0).layoutBase.DimensionD,h={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function a(l){this.options=(function(f,A){var T={};for(var v in f)T[v]=f[v];for(var v in A)T[v]=A[v];return T})(h,l),g(this.options)}var g=function(l){l.nodeRepulsion!=null&&(t.DEFAULT_REPULSION_STRENGTH=e.DEFAULT_REPULSION_STRENGTH=l.nodeRepulsion),l.idealEdgeLength!=null&&(t.DEFAULT_EDGE_LENGTH=e.DEFAULT_EDGE_LENGTH=l.idealEdgeLength),l.edgeElasticity!=null&&(t.DEFAULT_SPRING_STRENGTH=e.DEFAULT_SPRING_STRENGTH=l.edgeElasticity),l.nestingFactor!=null&&(t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=l.nestingFactor),l.gravity!=null&&(t.DEFAULT_GRAVITY_STRENGTH=e.DEFAULT_GRAVITY_STRENGTH=l.gravity),l.numIter!=null&&(t.MAX_ITERATIONS=e.MAX_ITERATIONS=l.numIter),l.gravityRange!=null&&(t.DEFAULT_GRAVITY_RANGE_FACTOR=e.DEFAULT_GRAVITY_RANGE_FACTOR=l.gravityRange),l.gravityCompound!=null&&(t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.DEFAULT_COMPOUND_GRAVITY_STRENGTH=l.gravityCompound),l.gravityRangeCompound!=null&&(t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=l.gravityRangeCompound),l.initialEnergyOnIncremental!=null&&(t.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.DEFAULT_COOLING_FACTOR_INCREMENTAL=l.initialEnergyOnIncremental),l.quality=="draft"?u.QUALITY=0:l.quality=="proof"?u.QUALITY=2:u.QUALITY=1,t.NODE_DIMENSIONS_INCLUDE_LABELS=e.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=l.nodeDimensionsIncludeLabels,t.DEFAULT_INCREMENTAL=e.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!l.randomize,t.ANIMATE=e.ANIMATE=u.ANIMATE=l.animate,t.TILE=l.tile,t.TILING_PADDING_VERTICAL=typeof l.tilingPaddingVertical=="function"?l.tilingPaddingVertical.call():l.tilingPaddingVertical,t.TILING_PADDING_HORIZONTAL=typeof l.tilingPaddingHorizontal=="function"?l.tilingPaddingHorizontal.call():l.tilingPaddingHorizontal};a.prototype.run=function(){var l,f,A=this.options;this.idToLNode={};var T=this.layout=new o,v=this;v.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var y=T.newGraphManager();this.gm=y;var N=this.options.eles.nodes(),s=this.options.eles.edges();this.root=y.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(N),T);for(var d=0;d<s.length;d++){var c=s[d],E=this.idToLNode[c.data("source")],L=this.idToLNode[c.data("target")];E!==L&&E.getEdgesBetween(L).length==0&&(y.add(T.newEdge(),E,L).id=c.id())}var O=function(w,D){typeof w=="number"&&(w=D);var C=w.data("id"),M=v.idToLNode[C];return{x:M.getRect().getCenterX(),y:M.getRect().getCenterY()}},I=function w(){for(var D,C=function(){A.fit&&A.cy.fit(A.eles,A.padding),l||(l=!0,v.cy.one("layoutready",A.ready),v.cy.trigger({type:"layoutready",layout:v}))},M=v.options.refresh,F=0;F<M&&!D;F++)D=v.stopped||v.layout.tick();if(D)return T.checkLayoutSuccess()&&!T.isSubLayout&&T.doPostLayout(),T.tilingPostLayout&&T.tilingPostLayout(),T.isLayoutFinished=!0,v.options.eles.nodes().positions(O),C(),v.cy.one("layoutstop",v.options.stop),v.cy.trigger({type:"layoutstop",layout:v}),f&&cancelAnimationFrame(f),void(l=!1);var G=v.layout.getPositionsData();A.eles.nodes().positions(function(x,P){if(typeof x=="number"&&(x=P),!x.isParent()){for(var S=x.id(),b=G[S],U=x;b==null&&(b=G[U.data("parent")]||G["DummyCompound_"+U.data("parent")],G[S]=b,(U=U.parent()[0])!=null););return b!=null?{x:b.x,y:b.y}:{x:x.position("x"),y:x.position("y")}}}),C(),f=requestAnimationFrame(w)};return T.addListener("layoutstarted",function(){v.options.animate==="during"&&(f=requestAnimationFrame(I))}),T.runLayout(),this.options.animate!=="during"&&(v.options.eles.nodes().not(":parent").layoutPositions(v,v.options,O),l=!1),this},a.prototype.getTopMostNodes=function(l){for(var f={},A=0;A<l.length;A++)f[l[A].id()]=!0;var T=l.filter(function(v,y){typeof v=="number"&&(v=y);for(var N=v.parent()[0];N!=null;){if(f[N.id()])return!1;N=N.parent()[0]}return!0});return T},a.prototype.processChildrenList=function(l,f,A){for(var T=f.length,v=0;v<T;v++){var y,N,s=f[v],d=s.children(),c=s.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((y=s.outerWidth()!=null&&s.outerHeight()!=null?l.add(new r(A.graphManager,new n(s.position("x")-c.w/2,s.position("y")-c.h/2),new i(parseFloat(c.w),parseFloat(c.h)))):l.add(new r(this.graphManager))).id=s.data("id"),y.paddingLeft=parseInt(s.css("padding")),y.paddingTop=parseInt(s.css("padding")),y.paddingRight=parseInt(s.css("padding")),y.paddingBottom=parseInt(s.css("padding")),this.options.nodeDimensionsIncludeLabels&&s.isParent()){var E=s.boundingBox({includeLabels:!0,includeNodes:!1}).w,L=s.boundingBox({includeLabels:!0,includeNodes:!1}).h,O=s.css("text-halign");y.labelWidth=E,y.labelHeight=L,y.labelPos=O}this.idToLNode[s.data("id")]=y,isNaN(y.rect.x)&&(y.rect.x=0),isNaN(y.rect.y)&&(y.rect.y=0),d!=null&&d.length>0&&(N=A.getGraphManager().add(A.newGraph(),y),this.processChildrenList(N,d,A))}},a.prototype.stop=function(){return this.stopped=!0,this};var p=function(l){l("layout","cose-bilkent",a)};typeof cytoscape<"u"&&p(cytoscape),R.exports=p}]))),q.exports);const ct=ht(ut);function tt(R,m){R.forEach(_=>{const u={id:_.id,labelText:_.label,height:_.height,width:_.width,padding:_.padding??0};Object.keys(_).forEach(e=>{["id","label","height","width","padding","x","y"].includes(e)||(u[e]=_[e])}),m.add({group:"nodes",data:u,position:{x:_.x??0,y:_.y??0}})})}function et(R,m){R.forEach(_=>{const u={id:_.id,source:_.start,target:_.end};Object.keys(_).forEach(e=>{["id","start","end"].includes(e)||(u[e]=_[e])}),m.add({group:"edges",data:u})})}function nt(R){return new Promise(m=>{const _=lt("body").append("div").attr("id","cy").attr("style","display:none"),u=V({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});_.remove(),tt(R.nodes,u),et(R.edges,u),u.nodes().forEach(function(e){e.layoutDimensions=()=>{const t=e.data();return{w:t.width,h:t.height}}}),u.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),u.ready(e=>{H.info("Cytoscape ready",e),m(u)})})}function rt(R){return R.nodes().map(m=>{const _=m.data(),u=m.position(),e={id:_.id,x:u.x,y:u.y};return Object.keys(_).forEach(t=>{t!=="id"&&(e[t]=_[t])}),e})}function it(R){return R.edges().map(m=>{const _=m.data(),u=m._private.rscratch,e={id:_.id,source:_.source,target:_.target,startX:u.startX,startY:u.startY,midX:u.midX,midY:u.midY,endX:u.endX,endY:u.endY};return Object.keys(_).forEach(t=>{["id","source","target"].includes(t)||(e[t]=_[t])}),e})}async function ot(R,m){H.debug("Starting cose-bilkent layout algorithm");try{st(R);const _=await nt(R),u=rt(_),e=it(_);return H.debug(`Layout completed: ${u.length} nodes, ${e.length} edges`),{nodes:u,edges:e}}catch(_){throw H.error("Error in cose-bilkent layout algorithm:",_),_}}function st(R){if(!R)throw new Error("Layout data is required");if(!R.config)throw new Error("Configuration is required in layout data");if(!R.rootNode)throw new Error("Root node is required");if(!R.nodes||!Array.isArray(R.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(R.edges))throw new Error("Edges array is required in layout data");return!0}V.use(ct),X(tt,"addNodes"),X(et,"addEdges"),X(nt,"createCytoscapeInstance"),X(rt,"extractPositionedNodes"),X(it,"extractPositionedEdges"),X(ot,"executeCoseBilkentLayout"),X(st,"validateLayoutData");var dt=X(async(R,m,{insertCluster:_,insertEdge:u,insertEdgeLabel:e,insertMarkers:t,insertNode:o,log:r,positionEdgeLabel:n},{algorithm:i})=>{const h={},a={},g=m.select("g");t(g,R.markers,R.type,R.diagramId);const p=g.insert("g").attr("class","subgraphs"),l=g.insert("g").attr("class","edgePaths"),f=g.insert("g").attr("class","edgeLabels"),A=g.insert("g").attr("class","nodes");r.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(R.nodes.map(async y=>{if(y.isGroup){const N={...y};a[y.id]=N,h[y.id]=N,await _(p,y)}else{const N={...y};h[y.id]=N;const s=await o(A,y,{config:R.config,dir:R.direction||"TB"}),d=s.node().getBBox();N.width=d.width,N.height=d.height,N.domId=s,r.debug(`Node ${y.id} dimensions: ${d.width}x${d.height}`)}})),r.debug("Running cose-bilkent layout algorithm");const T={...R,nodes:R.nodes.map(y=>{const N=h[y.id];return{...y,width:N.width,height:N.height}})},v=await ot(T,R.config);r.debug("Positioning nodes based on layout results"),v.nodes.forEach(y=>{const N=h[y.id];N!=null&&N.domId&&(N.domId.attr("transform",`translate(${y.x}, ${y.y})`),N.x=y.x,N.y=y.y,r.debug(`Positioned node ${N.id} at center (${y.x}, ${y.y})`))}),v.edges.forEach(y=>{const N=R.edges.find(s=>s.id===y.id);N&&(N.points=[{x:y.startX,y:y.startY},{x:y.midX,y:y.midY},{x:y.endX,y:y.endY}])}),r.debug("Inserting and positioning edges"),await Promise.all(R.edges.map(async y=>{await e(f,y);const N=h[y.start??""],s=h[y.end??""];if(N&&s){const d=v.edges.find(c=>c.id===y.id);if(d){r.debug("APA01 positionedEdge",d);const c={...y},E=u(l,c,a,R.type,N,s,R.diagramId);n(c,E)}else{const c={...y,points:[{x:N.x||0,y:N.y||0},{x:s.x||0,y:s.y||0}]},E=u(l,c,a,R.type,N,s,R.diagramId);n(c,E)}}})),r.debug("Cose-bilkent rendering completed")},"render");export{dt as render};
